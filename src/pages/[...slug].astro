---
import { useStoryblok } from '@storyblok/astro'
import StoryblokComponent from '@storyblok/astro/StoryblokComponent.astro'
import BaseLayout from '../layouts/BaseLayout.astro'

const { slug } = Astro.params
const story = await useStoryblok(
  `cdn/stories/${slug === undefined ? 'home' : slug}`,
  {
    version: 'draft',
    resolve_relations: ['featured-articles.posts'],
  },
  {},

  Astro
)
---

<BaseLayout>
  <StoryblokComponent blok={story.content} />
</BaseLayout>
